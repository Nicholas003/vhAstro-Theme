<!DOCTYPE html><html lang=zh-CN><head><meta charset=UTF-8><meta content=codeva-o7w5PhH3Ns name=baidu-site-verification><meta content="ie=edge" http-equiv=X-UA-Compatible><meta content="text/html; charset=UTF-8" http-equiv=Content-Type><meta content="width=device-width,initial-scale=1,user-scalable=no" name=viewport><title>vite项目使用pwa小记 | bigliu.der的博客</title><meta content=标签 name=keywords><meta content="PWA项目启动页面配置以及更新提示配置安装pnpmivite-plugin-pwa引入//vite.config.jsimport{VitePWA}from'vite-plugin-pwa'defineConfig({plugins:[VitePWA({manifest:{name:'',short" name=description><meta content="telephone=no, email=no, date=no, address=no" name=format-detection><meta content=vite项目使用pwa小记 name=title><meta content=http://blog.800800.top name=site><meta content=bigliu.der name=author><meta content="Astro v5.4.2" name=generator><meta content="index, follow, max-image-preview:large" name=robots><meta content=http://blog.800800.top/assets/images/banner/cccd5fd1c28df8d4.webp itemprop=image><meta content=bigliu.der property=article:author><meta content=article property=og:type><meta content=bigliu.der的博客 property=og:site_name><meta content=vite项目使用pwa小记 property=og:title><meta content="PWA项目启动页面配置以及更新提示配置安装pnpmivite-plugin-pwa引入//vite.config.jsimport{VitePWA}from'vite-plugin-pwa'defineConfig({plugins:[VitePWA({manifest:{name:'',short" property=og:description><meta content=http://blog.800800.top/article/cdbde6d2aefa95d5 property=og:url><meta content=http://blog.800800.top/assets/images/banner/cccd5fd1c28df8d4.webp property=og:image><meta content=zh_CN property=og:locale><meta content=summary_large_image name=twitter:card><meta content=bigliu.der的博客 name=twitter:site><meta content=bigliu.der name=twitter:creator><meta content=vite项目使用pwa小记 name=twitter:title><meta content="PWA项目启动页面配置以及更新提示配置安装pnpmivite-plugin-pwa引入//vite.config.jsimport{VitePWA}from'vite-plugin-pwa'defineConfig({plugins:[VitePWA({manifest:{name:'',short" name=twitter:description><meta content=http://blog.800800.top/article/cdbde6d2aefa95d5 name=twitter:url><meta content=http://blog.800800.top/assets/images/banner/cccd5fd1c28df8d4.webp name=twitter:image><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://blog.800800.top/article/cdbde6d2aefa95d5"},"headline":"vite项目使用pwa小记","image":["http://blog.800800.top/assets/images/banner/cccd5fd1c28df8d4.webp"],"author":{"@type":"Person","name":"bigliu.der","url":"http://blog.800800.top"},"publisher":{"@type":"Organization","name":"bigliu.der的博客","logo":{"@type":"ImageObject","url":"http://blog.800800.top/assets/images/banner/072c12ec85d2d3b5.webp"}}}</script><link href=/sitemap-index.xml rel=sitemap><link href=https://i0.wp.com rel=dns-prefetch><link href=https://tools-api.vvhan.com rel=dns-prefetch><link href=https://pagead2.googlesyndication.com rel=dns-prefetch><link href=https://lf9-cdn-tos.bytecdntp.com rel=dns-prefetch><link href=https://registry.npmmirror.com rel=dns-prefetch><link href=https://npm.elemecdn.com rel=dns-prefetch><link href=https://i0.wp.com rel=preconnect><link href=https://tools-api.vvhan.com rel=preconnect><link href=https://pagead2.googlesyndication.com rel=preconnect><link href=https://lf9-cdn-tos.bytecdntp.com rel=preconnect><link href=https://registry.npmmirror.com rel=preconnect><link href=https://npm.elemecdn.com rel=preconnect><link href=http://blog.800800.top/article/cdbde6d2aefa95d5 rel=canonical><link href=/favicon.ico rel=icon type=image/x-icon><link href=/_astro/Layout.Kcn8suC4.css rel=stylesheet><style>.vh-copyright{position:relative;margin:1.868rem 0;box-sizing:border-box;padding:1rem;width:100%;height:max-content;background-color:#00000008;border-radius:.618rem;overflow:hidden}.vh-copyright a{box-sizing:border-box;padding:1.88px;position:relative;width:max-content;height:max-content;color:#3338;box-shadow:none!important;overflow:hidden}.vh-copyright a:before{position:absolute;right:0;bottom:0;content:"";width:0;height:2px;background-color:#60a5fa;transition:all .3s ease-in-out}.vh-copyright a:hover:before{width:100%;left:0;right:auto}.vh-copyright>p{box-sizing:border-box;padding:.38rem 0!important;width:100%;height:max-content;font-size:.875rem!important}.vh-copyright>p>span{color:#9cc5fb}.vh-copyright>svg{position:absolute;right:3.66rem;top:0;width:auto;height:100%;opacity:.06;transform:scale(1.8);pointer-events:none;z-index:-1}@media screen and (max-width:666px){.vh-copyright>svg{display:none}}</style><link href=/_astro/_page_.DsCygsXd.css rel=stylesheet><link href=/_astro/_article_.Di18PtnJ.css rel=stylesheet><script type=module src=/_astro/page.BIOj8WhL.js></script></head><body><nav class=vh-mobilesidebar><section class=main><div class="vh-mobilesidebar-list user-panel"><h3>bigliu.der的博客</h3></div><div class="vh-link-list vh-mobilesidebar-list"><a href=/links target=_self class=links><object data=/assets/images/svg/Navs/links.svg type=image/svg+xml></object> 朋友</a></div></section></nav><header class=vh-header><section class=main><a href=/ class=index><svg viewBox="0 0 576 512" xmlns=http://www.w3.org/2000/svg><path d="M543.8 287.6c17 0 32-14 32-32.1c1-9-3-17-11-24L309.5 7c-6-5-14-7-21-7s-15 1-22 8L10 231.5c-7 7-10 15-10 24c0 18 14 32.1 32 32.1l32 0 0 160.4c0 35.3 28.7 64 64 64l102.3 0-31.3-52.2c-4.1-6.8-2.6-15.5 3.5-20.5L288 368l-60.2-82.8c-10.9-15 8.2-33.5 22.8-22l117.9 92.6c8 6.3 8.2 18.4 .4 24.9L288 448l38.4 64 122.1 0c35.5 0 64.2-28.8 64-64.3l-.7-160.2 32 0z"></path></svg> Home</a><div class="vh-link-list link-list"><a href=/links target=_self class=links>朋友 <img alt=朋友 src=/assets/images/svg/Navs/links.svg decoding=async height=10 loading=lazy width=10></a></div><div class=nav-btn><span class="nav-btn-item search-btn"><svg viewBox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"></path></svg> 搜索</span> <span class="nav-btn-item menu-btn"><svg viewBox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"></path></svg></span></div><section class=vh-search><main><div class=search-input><svg viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="m19.6 21l-6.3-6.3q-.75.6-1.725.95T9.5 16q-2.725 0-4.612-1.888T3 9.5t1.888-4.612T9.5 3t4.613 1.888T16 9.5q0 1.1-.35 2.075T14.7 13.3l6.3 6.3zM9.5 14q1.875 0 3.188-1.312T14 9.5t-1.312-3.187T9.5 5T6.313 6.313T5 9.5t1.313 3.188T9.5 14" fill=#B4B4B4></path></svg> <input placeholder=搜索文章 type=text></div><section class=vh-search-list><em></em></section></main></section></section></header><main class=vh-main><section class=vh-container><article class="vh-animation vh-animation-init vh-article-main"><header><h1>vite项目使用pwa小记</h1><div class=article-meta><span class=article-meta-item><svg viewBox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40L64 64C28.7 64 0 92.7 0 128l0 16 0 48L0 448c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-256 0-48 0-16c0-35.3-28.7-64-64-64l-40 0 0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40L152 64l0-40zM48 192l80 0 0 56-80 0 0-56zm0 104l80 0 0 64-80 0 0-64zm128 0l96 0 0 64-96 0 0-64zm144 0l80 0 0 64-80 0 0-64zm80-48l-80 0 0-56 80 0 0 56zm0 160l0 40c0 8.8-7.2 16-16 16l-64 0 0-56 80 0zm-128 0l0 56-96 0 0-56 96 0zm-144 0l0 56-64 0c-8.8 0-16-7.2-16-16l0-40 80 0zM272 248l-96 0 0-56 96 0 0 56z"></path></svg> <time>2025-03-13 下午</time> <span class=count><strong>161</strong>字</span> <span class=time><strong>0.8</strong>分钟</span> </span><a href=/categories/分类 class=article-meta-item><svg viewBox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><path d="M40 48C26.7 48 16 58.7 16 72l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24L40 48zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L192 64zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zM16 232l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0c-13.3 0-24 10.7-24 24zM40 368c-13.3 0-24 10.7-24 24l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0z"></path></svg> <span>分类</span></a></div></header><main><section class="vh-node vh-note"><p>PWA项目启动页面配置 以及更新提示配置</p></section><h4 id=安装>安装</h4><section class=vh-code-box><span class=vh-code-copy></span><pre class="astro-code github-light" data-language=bash style=background-color:#fff;color:#24292e;overflow-x:auto tabindex=0><code><span class=line><span style=color:#6f42c1>pnpm</span><span style=color:#032f62> i</span><span style=color:#032f62> vite-plugin-pwa</span></span></code></pre></section><h4 id=引入>引入</h4><section class=vh-code-box><span class=vh-code-copy></span><pre class="astro-code github-light" data-language=js style=background-color:#fff;color:#24292e;overflow-x:auto tabindex=0><code><span class=line><span style=color:#6a737d>// vite.config.js</span></span>
<span class=line><span style=color:#d73a49>import</span><span style=color:#24292e> { VitePWA } </span><span style=color:#d73a49>from</span><span style=color:#032f62> 'vite-plugin-pwa'</span></span>
<span class=line></span>
<span class=line><span style=color:#6f42c1>defineConfig</span><span style=color:#24292e>({</span></span>
<span class=line><span style=color:#24292e>  plugins: [</span></span>
<span class=line><span style=color:#6f42c1>    VitePWA</span><span style=color:#24292e>({</span></span>
<span class=line><span style=color:#24292e>      manifest: {</span></span>
<span class=line><span style=color:#24292e>        name: </span><span style=color:#032f62>''</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>        short_name: </span><span style=color:#032f62>''</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>        description: </span><span style=color:#032f62>''</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>        theme_color: </span><span style=color:#032f62>''</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>        icons: [</span></span>
<span class=line><span style=color:#24292e>          {</span></span>
<span class=line><span style=color:#032f62>            "src"</span><span style=color:#24292e>: </span><span style=color:#032f62>""</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#032f62>            "sizes"</span><span style=color:#24292e>: </span><span style=color:#032f62>"192x192"</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#032f62>            "type"</span><span style=color:#24292e>: </span><span style=color:#032f62>"image/png"</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#032f62>            "purpose"</span><span style=color:#24292e>: </span><span style=color:#032f62>"any"</span></span>
<span class=line><span style=color:#24292e>          },</span></span>
<span class=line><span style=color:#24292e>        ],</span></span>
<span class=line><span style=color:#24292e>      }</span></span>
<span class=line><span style=color:#24292e>      injectRegister:</span><span style=color:#032f62>'script'</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>      workbox:{</span></span>
<span class=line><span style=color:#24292e>        importScripts:[</span><span style=color:#032f62>'./service-worker.js'</span><span style=color:#24292e>] </span><span style=color:#6a737d>//你自己的worker文件 可以不传</span></span>
<span class=line><span style=color:#24292e>      },</span></span>
<span class=line><span style=color:#24292e>      </span></span>
<span class=line><span style=color:#24292e>    })</span></span>
<span class=line><span style=color:#24292e>  ]</span></span>
<span class=line><span style=color:#24292e>})</span></span>
<span class=line></span></code></pre></section><h4 id=重中之重-更新提示>重中之重 更新提示</h4><section class=vh-code-box><span class=vh-code-copy></span><pre class="astro-code github-light" data-language=js style=background-color:#fff;color:#24292e;overflow-x:auto tabindex=0><code><span class=line></span>
<span class=line><span style=color:#6a737d>// main.ts 或者 App.vue</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>import</span><span style=color:#24292e> { registerSW } </span><span style=color:#d73a49>from</span><span style=color:#032f62> 'virtual:pwa-register'</span></span>
<span class=line></span>
<span class=line></span>
<span class=line><span style=color:#d73a49>const</span><span style=color:#005cc5> updateSW</span><span style=color:#d73a49> =</span><span style=color:#6f42c1> registerSW</span><span style=color:#24292e>({</span></span>
<span class=line><span style=color:#6f42c1>  onNeedRefresh</span><span style=color:#24292e>() {</span></span>
<span class=line><span style=color:#6a737d>    // 当需要刷新 可以类似小程序提示  已准备好新版本 是否更新</span></span>
<span class=line><span style=color:#24292e>    ElMessageBox.</span><span style=color:#6f42c1>confirm</span><span style=color:#24292e>(</span><span style=color:#032f62>'发现新内容可用，是否加载？'</span><span style=color:#24292e>, </span><span style=color:#032f62>'更新提示'</span><span style=color:#24292e>, {</span></span>
<span class=line><span style=color:#24292e>      confirmButtonText: </span><span style=color:#032f62>'确定'</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>      cancelButtonText: </span><span style=color:#032f62>'取消'</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>      type: </span><span style=color:#032f62>'warning'</span><span style=color:#24292e>,</span></span>
<span class=line><span style=color:#24292e>    }).</span><span style=color:#6f42c1>then</span><span style=color:#24292e>(() </span><span style=color:#d73a49>=></span><span style=color:#24292e> {</span></span>
<span class=line><span style=color:#6f42c1>      updateSW</span><span style=color:#24292e>()</span></span>
<span class=line><span style=color:#24292e>    }).</span><span style=color:#6f42c1>catch</span><span style=color:#24292e>(() </span><span style=color:#d73a49>=></span><span style=color:#24292e> {})</span></span>
<span class=line><span style=color:#24292e>  },</span></span>
<span class=line><span style=color:#24292e>})</span></span>
<span class=line></span>
<span class=line></span></code></pre></section><p><img alt="visitor badge" src=/assets/images/lazy-loading.webp data-vh-lz-src="https://visitor-badge.laobi.icu/badge?page_id=Nicholas003.blog.cdbde6d2aefa95d5&#x26;format=true" class=vh-article-img></p><nav class=tag-list><a href=/tag/标签>标签</a></nav></main><footer><section class=vh-copyright><p>本文由 <span>bigliu.der</span> 于 2025-03-13 下午 发布</p><p>文章地址：<a href=http://blog.800800.top/article/cdbde6d2aefa95d5>vite项目使用pwa小记</a></p><p>本博客所有文章除特别声明外，均采用 <a href=https://creativecommons.org/licenses/by-nc-sa/4.0 target=_blank rel="noopener nofollow">CC BY-NC-SA 4.0</a> 许可协议。完整转载请注明来自 <a href=http://blog.800800.top>bigliu.der的博客</a>！</p><svg viewBox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><path d="M245.8 214.9l-33.2 17.3c-9.4-19.6-25.2-19.9-27.5-19.9-22.1 0-33.2 14.6-33.2 43.8 0 23.6 9.2 43.8 33.2 43.8 14.5 0 24.7-7.1 30.6-21.3l30.6 15.5c-6.2 11.5-25.7 39-65.1 39-22.6 0-74-10.3-74-77.1 0-58.7 43-77.1 72.6-77.1 30.7 0 52.7 12 66 35.9zm143.1 0l-32.8 17.3c-9.5-19.8-25.7-19.9-27.9-19.9-22.1 0-33.2 14.6-33.2 43.8 0 23.6 9.2 43.8 33.2 43.8 14.5 0 24.7-7.1 30.5-21.3l31 15.5c-2.1 3.8-21.4 39-65.1 39-22.7 0-74-9.9-74-77.1 0-58.7 43-77.1 72.6-77.1 30.7 0 52.6 12 65.6 35.9zM247.6 8.1C104.7 8.1 0 123.1 0 256.1c0 138.5 113.6 248 247.6 248 129.9 0 248.4-100.9 248.4-248 0-137.9-106.6-248-248.4-248zm.9 450.8c-112.5 0-203.7-93-203.7-202.8 0-105.4 85.4-203.3 203.7-203.3 112.5 0 202.8 89.5 202.8 203.3 0 121.7-99.7 202.8-202.8 202.8z"></path></svg></section></footer></article><aside class=vh-aside><section class="vh-aside-item user"><img alt=bigliu.der src=/assets/images/lazy-loading.webp decoding=async height=1 loading=lazy width=1 data-vh-lz-src="https://q1.qlogo.cn/g?b=qq&nk=826861827&s=640" class=vh-aside-avatar> <span class=vh-aside-auther>bigliu.der</span><p class=vh-aside-motto>科学、民主、自由</p><section class=vh-aside-links><a href=https://github.com/Nicholas003 target=_blank rel="noopener nofollow" class=vh-aside-links-item title=Github><img alt=Github src=/assets/images/svg/WebSites/github.svg decoding=async height=1 loading=lazy width=1></a></section></section><!-- <section class="vh-aside-item categories">
		<h3>分类</h3>
		<div class="vh-aside-categories">
			{
				categories
					.sort((a: any, b: any) => b.count - a.count)
					.map(i => (
						<a href={`${import.meta.env.VITE_BASE_URL}/categories/${i.title}`}>
							<span>{i.title}</span>
							<i>{i.count}</i>
						</a>
					))
			}
		</div>
	</section> --><!-- <section class="vh-aside-item tags">
		<h3>热门标签</h3>
		<div class="vh-aside-tags">
			{
				tags.map(i => (
					<a href={`${import.meta.env.VITE_BASE_URL}/tag/${i}`}>
						<span>{i}</span>
					</a>
				))
			}
		</div>
	</section> --><section class=sticky-aside><section class="vh-aside-item articles"><h3>推荐文章</h3><div class=vh-aside-articles><a href=/article/c5fad1e0622cbba6><p class=cover><img alt=你好世界 src=/assets/images/lazy-loading.webp decoding=async height=1 loading=lazy width=1 data-vh-lz-src=http://blog.800800.top/assets/images/banner/d9f74b9d32994c2f.webp></p><p class=info><span>你好世界</span> <time>2025-03-13 上午</time></p></a></div></section></section></aside></section></main><footer class=vh-footer><main><p><a href=/sitemap-index.xml target=_blank><img alt=sitemap src=/assets/images/footer/sitemap.svg decoding=async height=1 loading=lazy width=1></a><a href=/rss.xml target=_blank><img alt=rss src=/assets/images/footer/rss.svg decoding=async height=1 loading=lazy width=1></a><a href=# target=_blank rel="noopener noreferrer"><img alt=rss src="https://visitor-badge.laobi.icu/badge?page_id=Nicholas003.blog&format=true" decoding=async height=1 loading=lazy width=1></a><a href=# target=_blank rel="noopener noreferrer"><img alt=rss src=https://api.netlify.com/api/v1/badges/4444a400-e9bb-4668-aa5e-c6fd4105a57f/deploy-status decoding=async height=1 loading=lazy width=1></a></p></main></footer><section class=vh-back-top><svg viewBox="0 0 24 24"><defs><linearGradient id=Gradient x1=0% x2=100% y1=0% y2=0%><stop offset=0% style=stop-color:blue;stop-opacity:1></stop><stop offset=50% style=stop-color:violet;stop-opacity:1></stop><stop offset=100% style=stop-color:indigo;stop-opacity:1></stop></linearGradient></defs><circle cx=12 cy=12 fill=none r=10 stroke=url(#Gradient) stroke-linecap=round stroke-width=2 transform="rotate(-90, 12, 12)"></circle></svg> <svg viewBox="0 0 24 24" class=icon><path d="m6 15l6-6l6 6" fill=none stroke=#000 stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></section><script type=module src=/_astro/Layout.astro_astro_type_script_index_0_lang.BHwSvwuP.js></script></body></html>